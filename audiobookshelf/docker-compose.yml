###########################################################################
# AUTHOR:  aemcomtech.au
# VERSION: 1.2026.02.10.170845
# WEBSITE: aemcomtech.au
# PURPOSE: Secure a Docker-centric homelab repository by excluding sensitive 
#          environment variables, local database binaries, and platform-specific 
#          build artifacts.
###########################################################################
# Service: Audiobookshelf
# Role: Media Management
# Security Level: Authenticated
# Standard: ISO/IEC 27001 (InfoSec)
###########################################################################

services:
  audiobookshelf:
    image: ghcr.io/advplyr/audiobookshelf:latest
    container_name: audiobookshelf
    hostname: audiobookshelf
    restart: unless-stopped
    ports:
      - "${ABS_PORT}:80"
    volumes:
      # Media Libraries
      - ${ABS_AUDIOBOOKS_DIR}:/audiobooks
      - ${ABS_PODCASTS_DIR}:/podcasts
      
      # Configuration & Metadata
      - ${ABS_CONFIG_DIR}:/config
      - ${ABS_METADATA_DIR}:/metadata
    environment:
      - TZ=${TZ}
    healthcheck:
      test: ["CMD", "wget", "--no-verbose", "--spider", "http://127.0.0.1:80/healthcheck"]
      interval: 60s
      timeout: 10s
      retries: 10
      start_period: 20s
    networks:
      ${YOUR_NETWORK_1}:

networks:
  ${YOUR_NETWORK_1}:
    external: true