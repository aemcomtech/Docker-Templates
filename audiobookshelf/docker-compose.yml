###########################################################################
# AUTHOR:  aemcomtech.au
# VERSION: 1.2026.02.10.170845
# WEBSITE: aemcomtech.au
# PURPOSE: Secure a Docker-centric homelab repository by excluding sensitive 
#          environment variables, local database binaries, and platform-specific 
#          build artifacts.
###########################################################################
# Service: Audiobookshelf
# Role: Media Management
# Security Level: Authenticated
# Standard: ISO/IEC 27001 (InfoSec)
###########################################################################

services:
  audiobookshelf:
    image: ghcr.io/advplyr/audiobookshelf:latest
    container_name: audiobookshelf
    hostname: audiobookshelf
    ports:
      - "13378:80"
    volumes:
      # Map these to your local storage paths
      - 'G:\Audiobookshelf:/audiobooks'
      - 'G:\Audiobookshelf\podcasts:/podcasts'
      - 'Q:\Docker Compose\audiobookshelf\config:/config'
      - 'Q:\Docker Compose\audiobookshelf\metadata:/metadata'
    environment:
      - TZ=Australia/Melbourne
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--no-verbose", "--spider", "http://127.0.0.1:80/healthcheck"]
      interval: 60s
      timeout: 10s
      retries: 10
      start_period: 20s
    networks:
      - YOUR_NETWORK

networks:
  YOUR_NETWORK:
    external: true